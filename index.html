<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3Dæµªæ¼«åœ£è¯æ ‘</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            background: #000;
            height: 100vh;
            overflow: hidden;
            font-family: "Microsoft YaHei", sans-serif;
        }
        /* é›ªèŠ±æ ·å¼ï¼ˆä¼˜åŒ–é€‚é…3Dåœºæ™¯ï¼‰ */
        .snowflake {
            position: absolute;
            color: #fff;
            font-size: 16px;
            opacity: 0.8;
            user-select: none;
            pointer-events: none; /* é¿å…é®æŒ¡3Däº¤äº’ */
            animation: snowfall linear infinite;
        }
        /* 3Dåœºæ™¯å®¹å™¨ */
        #scene-container {
            position: absolute;
            width: 100%;
            height: 100%;
        }
        /* ç¥ç¦è¯­ï¼ˆä¼˜åŒ–å…‰å½±ï¼‰ */
        .message {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            color: #fff;
            font-size: 18px;
            text-align: center;
            text-shadow: 0 0 15px #ff69b4, 0 0 30px #ff00de, 0 0 45px #9900cc;
            animation: fade 3s infinite alternate;
            z-index: 10;
            pointer-events: none;
        }
        /* åŠ¨ç”»æ•ˆæœä¼˜åŒ– */
        @keyframes snowfall {
            0% {
                top: -10%;
                transform: translateX(0) rotate(0deg);
            }
            100% {
                top: 100%;
                transform: translateX(50px) rotate(360deg);
            }
        }
        @keyframes fade {
            0% {
                opacity: 0.7;
                text-shadow: 0 0 10px #ff69b4, 0 0 20px #ff00de;
            }
            100% {
                opacity: 1;
                text-shadow: 0 0 20px #ff69b4, 0 0 40px #ff00de, 0 0 60px #9900cc;
            }
        }
        /* æ‰‹æœºé€‚é… */
        @media (max-width: 768px) {
            .message {
                font-size: 16px;
                bottom: 20px;
            }
            .snowflake {
                font-size: 12px;
            }
        }
    </style>
</head>
<body>
    <!-- 3Dåœºæ™¯å®¹å™¨ -->
    <div id="scene-container"></div>
    <!-- ç¥ç¦è¯­ -->
    <div class="message">
        æ„¿åœ£è¯çš„æ˜Ÿå…‰æ¸©æš–ä½ çš„æ¯ä¸€å¤©<br>
        åœ£è¯å¿«ä¹ ğŸ„
    </div>

    <!-- å¼•å…¥Three.jsæ ¸å¿ƒåº“ -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.158.0/build/three.min.js"></script>
    <!-- å¼•å…¥è½¨é“æ§åˆ¶å™¨ï¼ˆæ”¯æŒé¼ æ ‡/è§¦æ‘¸æ—‹è½¬è§†è§’ï¼‰ -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.158.0/examples/js/controls/OrbitControls.js"></script>

    <script>
        // ====================== 3Dåœ£è¯æ ‘æ ¸å¿ƒé€»è¾‘ ======================
        // 1. åˆå§‹åŒ–åœºæ™¯ã€ç›¸æœºã€æ¸²æŸ“å™¨
        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0x000000); // é»‘è‰²èƒŒæ™¯
        scene.fog = new THREE.Fog(0x000000, 10, 30); // æŸ”åŒ–è¿œå¤„æ•ˆæœ

        // é€è§†ç›¸æœºï¼ˆé€‚é…æ‰‹æœºå±å¹•ï¼‰
        const camera = new THREE.PerspectiveCamera(
            75,
            window.innerWidth / window.innerHeight,
            0.1,
            1000
        );
        camera.position.set(0, 5, 15); // ç›¸æœºåˆå§‹ä½ç½®

        // æ¸²æŸ“å™¨ï¼ˆæŠ—é”¯é½¿+é€‚é…å±å¹•ï¼‰
        const renderer = new THREE.WebGLRenderer({ 
            antialias: true, // æŠ—é”¯é½¿
            alpha: true 
        });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.shadowMap.enabled = true; // å¼€å¯é˜´å½±
        renderer.shadowMap.type = THREE.PCFSoftShadowMap; // æŸ”åŒ–é˜´å½±
        document.getElementById('scene-container').appendChild(renderer.domElement);

        // 2. æ·»åŠ å…‰æºï¼ˆè¥é€ æµªæ¼«å…‰å½±ï¼‰
        // ç¯å¢ƒå…‰ï¼ˆåŸºç¡€ç…§æ˜ï¼‰
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.3);
        scene.add(ambientLight);

        // ç‚¹å…‰æºï¼ˆæ¨¡æ‹Ÿåœ£è¯å½©ç¯ï¼Œç²‰è‰²æŸ”å…‰ï¼‰
        const pointLight1 = new THREE.PointLight(0xff69b4, 1.5, 20);
        pointLight1.position.set(5, 8, 5);
        pointLight1.castShadow = true;
        scene.add(pointLight1);

        // ç‚¹å…‰æºï¼ˆç»¿è‰²æŸ”å…‰ï¼‰
        const pointLight2 = new THREE.PointLight(0x32cd32, 1.2, 20);
        pointLight2.position.set(-5, 8, -5);
        pointLight2.castShadow = true;
        scene.add(pointLight2);

        // èšå…‰ç¯ï¼ˆç…§äº®åœ£è¯æ ‘ä¸»ä½“ï¼‰
        const spotLight = new THREE.SpotLight(0xffffff, 1);
        spotLight.position.set(0, 15, 0);
        spotLight.target.position.set(0, 0, 0);
        spotLight.angle = Math.PI / 4;
        spotLight.penumbra = 0.2;
        spotLight.castShadow = true;
        scene.add(spotLight);
        scene.add(spotLight.target);

        // 3. åˆ›å»º3Dåœ£è¯æ ‘
        function createChristmasTree() {
            // åœ£è¯æ ‘ç»„ï¼ˆæ–¹ä¾¿æ•´ä½“æ—‹è½¬ï¼‰
            const treeGroup = new THREE.Group();

            // æ ‘å¹²
            const trunkGeometry = new THREE.CylinderGeometry(1, 1.5, 6, 16);
            const trunkMaterial = new THREE.MeshPhongMaterial({
                color: 0x8B4513, // æ£•æœ¨è‰²
                shininess: 10,
                specular: 0x442200
            });
            const trunk = new THREE.Mesh(trunkGeometry, trunkMaterial);
            trunk.position.y = -3; // æ ‘å¹²ä½ç½®
            trunk.castShadow = true;
            trunk.receiveShadow = true;
            treeGroup.add(trunk);

            // åœ£è¯æ ‘ä¸»ä½“ï¼ˆä¸‰å±‚é”¥å½¢ï¼Œæ¸å˜ç»¿è‰²ï¼‰
            const treeColors = [0x228B22, 0x2E8B57, 0x32CD32]; // æ·±ç»¿â†’ä¸­ç»¿â†’æµ…ç»¿
            const treeHeights = [6, 5, 4];
            const treeRadii = [4, 3, 2];

            for (let i = 0; i < 3; i++) {
                const coneGeometry = new THREE.ConeGeometry(treeRadii[i], treeHeights[i], 32);
                const coneMaterial = new THREE.MeshPhongMaterial({
                    color: treeColors[i],
                    shininess: 20,
                    specular: 0x00ff00,
                    emissive: 0x002200, // å¾®å¼±è‡ªå‘å…‰
                    emissiveIntensity: 0.2
                });
                const cone = new THREE.Mesh(coneGeometry, coneMaterial);
                cone.position.y = (treeHeights[i]/2) + (i * (treeHeights[i] - 1)); // åˆ†å±‚å †å 
                cone.castShadow = true;
                cone.receiveShadow = true;
                treeGroup.add(cone);
            }

            // æ ‘é¡¶æ˜Ÿæ˜Ÿ
            const starGeometry = new THREE.SphereGeometry(0.8, 16, 16); // ç”¨çƒä½“æ¨¡æ‹Ÿæ˜Ÿæ˜Ÿï¼ˆæ›´ç«‹ä½“ï¼‰
            const starMaterial = new THREE.MeshPhongMaterial({
                color: 0xFFD700, // é‡‘è‰²
                shininess: 100,
                specular: 0xffffff,
                emissive: 0xffff00,
                emissiveIntensity: 0.5
            });
            const star = new THREE.Mesh(starGeometry, starMaterial);
            star.position.y = 10; // æ˜Ÿæ˜Ÿä½ç½®
            star.castShadow = true;
            treeGroup.add(star);

            // è£…é¥°çƒï¼ˆéšæœºåˆ†å¸ƒï¼‰
            const ornamentColors = [0xFF0000, 0x00FF00, 0x0000FF, 0xFFFF00, 0xFF69B4, 0x8A2BE2, 0xFF8C00];
            for (let i = 0; i < 20; i++) {
                const ornamentGeometry = new THREE.SphereGeometry(0.3, 16, 16);
                const ornamentMaterial = new THREE.MeshPhongMaterial({
                    color: ornamentColors[Math.floor(Math.random() * ornamentColors.length)],
                    shininess: 50,
                    specular: 0xffffff,
                    emissive: ornamentColors[Math.floor(Math.random() * ornamentColors.length)],
                    emissiveIntensity: 0.3
                });
                const ornament = new THREE.Mesh(ornamentGeometry, ornamentMaterial);
                // éšæœºåˆ†å¸ƒåœ¨æ ‘ä¸Š
                const angle = Math.random() * Math.PI * 2;
                const radius = Math.random() * 3 + 0.5;
                const height = Math.random() * 8 + 1;
                ornament.position.set(
                    Math.cos(angle) * radius,
                    height,
                    Math.sin(angle) * radius
                );
                ornament.castShadow = true;
                treeGroup.add(ornament);
            }

            // æ·»åŠ åˆ°åœºæ™¯
            scene.add(treeGroup);
            return treeGroup;
        }

        // åˆ›å»ºåœ£è¯æ ‘å¹¶æ·»åŠ è½¨é“æ§åˆ¶å™¨
        const tree = createChristmasTree();
        const controls = new THREE.OrbitControls(camera, renderer.domElement);
        controls.enableDamping = true; // é˜»å°¼æ•ˆæœï¼ˆæ—‹è½¬æ›´é¡ºæ»‘ï¼‰
        controls.dampingFactor = 0.05;
        controls.minDistance = 8; // æœ€å°ç¼©æ”¾è·ç¦»
        controls.maxDistance = 30; // æœ€å¤§ç¼©æ”¾è·ç¦»
        controls.enablePan = false; // ç¦ç”¨å¹³ç§»ï¼ˆç®€åŒ–æ“ä½œï¼‰

        // 4. åŠ¨ç”»å¾ªç¯ï¼ˆè‡ªåŠ¨æ—‹è½¬+å‘¼å¸æ•ˆæœï¼‰
        function animate() {
            requestAnimationFrame(animate);

            // åœ£è¯æ ‘è‡ªåŠ¨ç¼“æ…¢æ—‹è½¬
            tree.rotation.y += 0.005;
            // æ ‘é¡¶æ˜Ÿæ˜Ÿå‘¼å¸æ•ˆæœ
            const star = tree.children[tree.children.length - 2]; // æ˜Ÿæ˜Ÿæ˜¯å€’æ•°ç¬¬äºŒä¸ªå­å…ƒç´ 
            star.scale.set(
                1 + Math.sin(Date.now() * 0.001) * 0.1,
                1 + Math.sin(Date.now() * 0.001) * 0.1,
                1 + Math.sin(Date.now() * 0.001) * 0.1
            );

            // æ›´æ–°æ§åˆ¶å™¨
            controls.update();
            // æ¸²æŸ“åœºæ™¯
            renderer.render(scene, camera);
        }
        animate();

        // 5. å±å¹•é€‚é…
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        // ====================== é›ªèŠ±æ•ˆæœï¼ˆä¿ç•™å¹¶ä¼˜åŒ–ï¼‰ ======================
        function createSnowflakes() {
            const snowCount = 80; // å¢åŠ é›ªèŠ±æ•°é‡å¢å¼ºæ°›å›´
            const body = document.body;

            for (let i = 0; i < snowCount; i++) {
                const snowflake = document.createElement('div');
                snowflake.classList.add('snowflake');
                // éšæœºé›ªèŠ±å­—ç¬¦
                const snowChars = ['â„ï¸', 'â…', 'â†', 'âœ»', 'â‰'];
                snowflake.textContent = snowChars[Math.floor(Math.random() * snowChars.length)];
                // éšæœºä½ç½®å’ŒåŠ¨ç”»
                const size = Math.random() * 8 + 4;
                snowflake.style.fontSize = `${size}px`;
                snowflake.style.left = `${Math.random() * 100}vw`;
                snowflake.style.animationDuration = `${Math.random() * 15 + 10}s`;
                snowflake.style.animationDelay = `${Math.random() * 8}s`;
                body.appendChild(snowflake);

                // é›ªèŠ±è½åœ°åé‡æ–°ç”Ÿæˆ
                snowflake.addEventListener('animationend', () => {
                    snowflake.remove();
                    createSnowflakes();
                });
            }
        }

        // é¡µé¢åŠ è½½æ—¶åˆ›å»ºé›ªèŠ±
        window.onload = function() {
            createSnowflakes();
        };
    </script>
</body>
</html>
